{% load widget_tweaks %}

<script>
    document.getElementById('modalTitle').textContent = '{% if shelf %}Edytuj półkę{% else %}Dodaj półkę{% endif %}';
</script>

<form hx-post="{% if shelf %}{% url 'wms_builder:htmx_shelf_edit' shelf.id %}{% else %}{% url 'wms_builder:htmx_shelf_create' rack.id %}{% endif %}"
      hx-target="body"
      hx-swap="none"
      hx-on::after-request="if(event.detail.xhr.status === 204) { htmx.trigger('body', 'modalHide'); }">
    {% csrf_token %}
    
    <div class="mb-3">
        <label for="{{ form.name.id_for_label }}" class="form-label">{{ form.name.label }}</label>
        {% render_field form.name class="form-control" %}
        {% if form.name.errors %}
            <div class="text-danger small">{{ form.name.errors }}</div>
        {% endif %}
    </div>
    
    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="{{ form.x.id_for_label }}" class="form-label">{{ form.x.label }}</label>
            {% render_field form.x class="form-control" %}
            {% if form.x.errors %}
                <div class="text-danger small">{{ form.x.errors }}</div>
            {% endif %}
        </div>
        
        <div class="col-md-6 mb-3">
            <label for="{{ form.y.id_for_label }}" class="form-label">{{ form.y.label }}</label>
            {% render_field form.y class="form-control" %}
            {% if form.y.errors %}
                <div class="text-danger small">{{ form.y.errors }}</div>
            {% endif %}
        </div>
    </div>
    
    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="{{ form.width.id_for_label }}" class="form-label">{{ form.width.label }}</label>
            {% render_field form.width class="form-control" %}
            {% if form.width.errors %}
                <div class="text-danger small">{{ form.width.errors }}</div>
            {% endif %}
        </div>
        
        <div class="col-md-6 mb-3">
            <label for="{{ form.height.id_for_label }}" class="form-label">{{ form.height.label }}</label>
            {% render_field form.height class="form-control" %}
            {% if form.height.errors %}
                <div class="text-danger small">{{ form.height.errors }}</div>
            {% endif %}
        </div>
    </div>
    
    <div class="mb-3">
        <label for="{{ form.color.id_for_label }}" class="form-label">{{ form.color.label }}</label>
        {% render_field form.color class="form-control" %}
        {% if form.color.errors %}
            <div class="text-danger small">{{ form.color.errors }}</div>
        {% endif %}
    </div>
    
    <div class="d-flex justify-content-end">
        <button type="button" class="btn btn-secondary me-2" data-bs-dismiss="modal">Anuluj</button>
        <button type="submit" class="btn btn-primary">Zapisz</button>
    </div>
</form>

